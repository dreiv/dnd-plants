{"version":3,"sources":["app-context/AppContext.js","app-context/actions/loadData.js","components/filters/Filters.js","components/items/Items.js","App.js","index.js"],"names":["AppStateContext","createContext","AppDispatchContext","appReducer","state","action","type","appTypes","loadData","data","climatesTmp","localesTmp","forEach","item","key","split","climate","locale","filteredData","climates","Object","keys","locales","filterData","Error","initialState","AppProvider","children","useReducer","dispatch","useEffect","Tabletop","init","simpleSheet","then","catch","console","warn","Provider","value","useAppState","context","useContext","undefined","seasons","Filters","useAppDispatch","didMount","useRef","useState","season","setSeason","setClimate","setLocale","current","filter","includes","onChange","target","map","s","idx","Items","renderItem","className","name","class","join","i","App","open","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yRAKMA,EAAkBC,0BAClBC,EAAqBD,0BAE3B,SAASE,EAAWC,EAAOC,GACzB,OAAQA,EAAOC,MACb,KAAKC,EAASC,SACZ,OCTC,SAAkBJ,EAAOK,GAC9B,IAAMC,EAAc,CAAE,gBAAgB,GAChCC,EAAa,CAAE,eAAe,GAepC,OAbAF,EAAKG,SAAQ,SAACC,GACZ,CAAC,SAAU,UAAW,UAAUD,SAAQ,SAACE,GACvCD,EAAKC,GAAgBD,EAAKC,GARFC,MAAM,SAWhCF,EAAKG,QAAQJ,SAAQ,SAACI,GACpBN,EAAYM,IAAW,KAEzBH,EAAKI,OAAOL,SAAQ,SAACI,GACnBL,EAAWK,IAAW,QAInB,2BACFZ,GADL,IAEEK,KAAMA,EACNS,aAAcT,EACdU,SAAUC,OAAOC,KAAKX,GACtBY,QAASF,OAAOC,KAAKV,KDbZH,CAASJ,EAAOC,EAAOI,MAChC,KAAKF,EAASgB,WACZ,IAAQL,EAAiBb,EAAjBa,aAER,OAAO,2BACFd,GADL,IAEEc,iBAEJ,QACE,MAAM,IAAIM,MAAJ,iCAAoCnB,EAAOC,QAIvD,IAAMC,EAAW,CACfC,SAAU,WACVe,WAAY,cAGRE,EAAe,CACnBhB,KAAM,GACNS,aAAc,GACdC,SAAU,CAAC,gBACXG,QAAS,CAAC,gBAGZ,SAASI,EAAT,GAAoC,IAAbC,EAAY,EAAZA,SACrB,EAA0BC,qBAAWzB,EAAYsB,GAAjD,mBAAOrB,EAAP,KAAcyB,EAAd,KAaA,OAXAC,qBAAU,WACRC,IAASC,KAAK,CACZlB,IAAK,+CACLmB,aAAa,IAEZC,MAAK,SAACzB,GACLoB,EAAS,CAAEvB,KAAMC,EAASC,SAAUC,YAErC0B,MAAMC,QAAQC,QAChB,IAGD,cAACrC,EAAgBsC,SAAjB,CAA0BC,MAAOnC,EAAjC,SACE,cAACF,EAAmBoC,SAApB,CAA6BC,MAAOV,EAApC,SACGF,MAMT,SAASa,IACP,IAAMC,EAAUC,qBAAW1C,GAE3B,QAAgB2C,IAAZF,EACF,MAAM,IAAIjB,MAAM,iDAElB,OAAOiB,E,YE5DHG,G,MAAU,CAAC,cAAe,SAAU,SAAU,SAAU,WAEvD,SAASC,IACd,IAAMhB,EF4DR,WACE,IAAMY,EAAUC,qBAAWxC,GAE3B,QAAgByC,IAAZF,EACF,MAAM,IAAIjB,MAAM,oDAElB,OAAOiB,EElEUK,GACXC,EAAWC,kBAAO,GAExB,EAAoCR,IAA5B/B,EAAR,EAAQA,KAAMU,EAAd,EAAcA,SAAUG,EAAxB,EAAwBA,QACxB,EAA4B2B,mBAASL,EAAQ,IAA7C,mBAAOM,EAAP,KAAeC,EAAf,KACA,EAA8BF,mBAAS9B,EAAS,IAAhD,mBAAOH,EAAP,KAAgBoC,EAAhB,KACA,EAA4BH,mBAAS3B,EAAQ,IAA7C,mBAAOL,EAAP,KAAeoC,EAAf,KA6BA,OA3BAvB,qBAAU,WACR,GAAIiB,EAASO,QAAS,CACnB,IAAIpC,EAAY,YAAOT,GAEnByC,IAAWN,EAAQ,KACrB1B,EAAeA,EAAaqC,QAAO,SAAC1C,GAAD,OACjCA,EAAKqC,OAAOM,SAASN,OAIrBlC,IAAYG,EAAS,KACvBD,EAAeA,EAAaqC,QAAO,SAAC1C,GAAD,OACjCA,EAAKG,QAAQwC,SAASxC,OAItBC,IAAWK,EAAQ,KACrBJ,EAAeA,EAAaqC,QAAO,SAAC1C,GAAD,OACjCA,EAAKI,OAAOuC,SAASvC,OAI1BY,EAAS,CAAEvB,KAAMC,EAASgB,WAAYL,sBACjC6B,EAASO,SAAU,IAEzB,CAACJ,EAAQlC,EAASC,IAGnB,iCACE,2CAEE,wBACEsB,MAAOW,EACPO,SAAU,gBAAalB,EAAb,EAAGmB,OAAUnB,MAAb,OAA2BY,EAAUZ,IAFjD,SAIGK,EAAQe,KAAI,SAACC,EAAGC,GAAJ,OACX,wBAAkBtB,MAAOqB,EAAzB,SACGA,GADUC,WAOnB,4CAEE,wBACEtB,MAAOvB,EACPyC,SAAU,gBAAalB,EAAb,EAAGmB,OAAUnB,MAAb,OAA2Ba,EAAWb,IAFlD,SAIGpB,EAASwC,KAAI,SAACC,EAAGC,GAAJ,OACZ,wBAAkBtB,MAAOqB,EAAzB,SACGA,GADUC,WAOnB,2CAEE,wBACEtB,MAAOtB,EACPwC,SAAU,gBAAalB,EAAb,EAAGmB,OAAUnB,MAAb,OAA2Bc,EAAUd,IAFjD,SAIGjB,EAAQqC,KAAI,SAACC,EAAGC,GAAJ,OACX,wBAAkBtB,MAAOqB,EAAzB,SACGA,GADUC,c,MC3ElB,SAASC,IACd,IAAQ5C,EAAiBsB,IAAjBtB,aAEF6C,EAAa,SAAClD,GAAD,OACjB,qBAAImD,UAAU,OAAd,UACE,6BAAKnD,EAAKoD,OACV,oBAAGC,MAAM,mBAAT,qBAAqCrD,EAAKqC,OAAOiB,KAAK,SACtD,oBAAGD,MAAM,mBAAT,sBAAsCrD,EAAKG,QAAQmD,KAAK,SACxD,oBAAGD,MAAM,mBAAT,qBAAqCrD,EAAKI,OAAOkD,KAAK,aAI1D,OACE,oBAAIH,UAAU,kBAAd,SACG9C,EAAayC,KAAI,SAAC9C,EAAMuD,GAAP,OAChB,cAAC,WAAD,UACGL,EAAWlD,IADCuD,Q,MCHRC,MAZf,WACE,OACE,qCACE,0BAASL,UAAU,iBAAiBM,MAAI,EAAxC,UACE,8CACA,cAAC,EAAD,OAEF,cAAC,EAAD,Q,MCLNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC/C,EAAD,UACE,cAAC,EAAD,QAGJgD,SAASC,eAAe,W","file":"static/js/main.b1a3237d.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from \"react\";\nimport Tabletop from \"tabletop\";\n\nimport { loadData } from \"./actions\";\n\nconst AppStateContext = createContext();\nconst AppDispatchContext = createContext();\n\nfunction appReducer(state, action) {\n  switch (action.type) {\n    case appTypes.loadData:\n      return loadData(state, action.data);\n    case appTypes.filterData:\n      const { filteredData } = action;\n\n      return {\n        ...state,\n        filteredData,\n      };\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\nconst appTypes = {\n  loadData: \"loadData\",\n  filterData: \"filterData\",\n};\n\nconst initialState = {\n  data: [],\n  filteredData: [],\n  climates: [\"All Climates\"],\n  locales: [\"All Locales\"],\n};\n\nfunction AppProvider({ children }) {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  useEffect(() => {\n    Tabletop.init({\n      key: \"1joq6oGR_nb_mHa4-w2r-EC50qWim7mWvqiN_K1WxGRE\",\n      simpleSheet: true,\n    })\n      .then((data) => {\n        dispatch({ type: appTypes.loadData, data });\n      })\n      .catch(console.warn);\n  }, []);\n\n  return (\n    <AppStateContext.Provider value={state}>\n      <AppDispatchContext.Provider value={dispatch}>\n        {children}\n      </AppDispatchContext.Provider>\n    </AppStateContext.Provider>\n  );\n}\n\nfunction useAppState() {\n  const context = useContext(AppStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useAppState must be used within a AppProvider\");\n  }\n  return context;\n}\n\nfunction useAppDispatch() {\n  const context = useContext(AppDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useAppDispatch must be used within a AppProvider\");\n  }\n  return context;\n}\n\nexport { AppProvider, useAppState, useAppDispatch, appTypes };\n","const strToArr = (str) => str.split(\", \");\n\nexport function loadData(state, data) {\n  const climatesTmp = { \"All Climates\": true };\n  const localesTmp = { \"All Locales\": true };\n\n  data.forEach((item) => {\n    [\"season\", \"climate\", \"locale\"].forEach((key) => {\n      item[key] = strToArr(item[key]);\n    });\n\n    item.climate.forEach((climate) => {\n      climatesTmp[climate] = true;\n    });\n    item.locale.forEach((climate) => {\n      localesTmp[climate] = true;\n    });\n  });\n\n  return {\n    ...state,\n    data: data,\n    filteredData: data,\n    climates: Object.keys(climatesTmp),\n    locales: Object.keys(localesTmp),\n  };\n}\n","import React, { useRef, useEffect, useState } from \"react\";\n\nimport { useAppState, appTypes, useAppDispatch } from \"app-context\";\nimport \"./Filters.css\";\n\nconst seasons = [\"All Seasons\", \"Spring\", \"Summer\", \"Autumn\", \"Winter\"];\n\nexport function Filters() {\n  const dispatch = useAppDispatch();\n  const didMount = useRef(false);\n\n  const { data, climates, locales } = useAppState();\n  const [season, setSeason] = useState(seasons[0]);\n  const [climate, setClimate] = useState(climates[0]);\n  const [locale, setLocale] = useState(locales[0]);\n\n  useEffect(() => {\n    if (didMount.current) {\n       let filteredData = [...data];\n\n       if (season !== seasons[0]) {\n         filteredData = filteredData.filter((item) =>\n           item.season.includes(season)\n         );\n       }\n\n       if (climate !== climates[0]) {\n         filteredData = filteredData.filter((item) =>\n           item.climate.includes(climate)\n         );\n       }\n\n       if (locale !== locales[0]) {\n         filteredData = filteredData.filter((item) =>\n           item.locale.includes(locale)\n         );\n       }\n\n      dispatch({ type: appTypes.filterData, filteredData });\n    } else didMount.current = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [season, climate, locale]);\n\n  return (\n    <form>\n      <label>\n        Season\n        <select\n          value={season}\n          onChange={({ target: { value } }) => setSeason(value)}\n        >\n          {seasons.map((s, idx) => (\n            <option key={idx} value={s}>\n              {s}\n            </option>\n          ))}\n        </select>\n      </label>\n\n      <label>\n        Climate\n        <select\n          value={climate}\n          onChange={({ target: { value } }) => setClimate(value)}\n        >\n          {climates.map((s, idx) => (\n            <option key={idx} value={s}>\n              {s}\n            </option>\n          ))}\n        </select>\n      </label>\n\n      <label>\n        Locale\n        <select\n          value={locale}\n          onChange={({ target: { value } }) => setLocale(value)}\n        >\n          {locales.map((s, idx) => (\n            <option key={idx} value={s}>\n              {s}\n            </option>\n          ))}\n        </select>\n      </label>\n    </form>\n  );\n}\n","import React, { Fragment } from \"react\";\n\nimport { useAppState } from \"app-context\";\nimport \"./Items.css\";\n\nexport function Items() {\n  const { filteredData } = useAppState();\n\n  const renderItem = (item) => (\n    <li className=\"item\">\n      <h3>{item.name}</h3>\n      <p class=\"detail-container\">Season: {item.season.join(\", \")}</p>\n      <p class=\"detail-container\">Climate: {item.climate.join(\", \")}</p>\n      <p class=\"detail-container\">Locale: {item.locale.join(\", \")}</p>\n    </li>\n  );\n\n  return (\n    <ul className=\"items-container\">\n      {filteredData.map((item, i) => (\n        <Fragment key={i}>\n          {renderItem(item)}\n        </Fragment>\n      ))}\n    </ul>\n  );\n}\n","import React from \"react\";\n\nimport { Filters, Items } from \"./components\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <>\n      <details className=\"filter-details\" open>\n        <summary>Filters</summary>\n        <Filters />\n      </details>\n      <Items />\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { AppProvider } from \"./app-context\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <App />\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}